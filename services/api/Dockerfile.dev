FROM node:24-bookworm

ARG TOFU_VERSION=1.7.3
ARG TARGETARCH

RUN apt-get update \
  && apt-get install -y --no-install-recommends ca-certificates curl git unzip \
  && rm -rf /var/lib/apt/lists/*

RUN arch="${TARGETARCH:-amd64}" \
  && curl -fsSL -o /tmp/tofu.zip \
    "https://github.com/opentofu/opentofu/releases/download/v${TOFU_VERSION}/tofu_${TOFU_VERSION}_linux_${arch}.zip" \
  && unzip /tmp/tofu.zip -d /usr/local/bin \
  && rm /tmp/tofu.zip
